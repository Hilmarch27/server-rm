// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id_rm     String   @id @default(uuid())
  nama      String
  pn        Int   @unique
  password  String
  role      String   @default("user")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
   acts      Act[]
}


model Debitur {
  id_debitur    String   @id @default(uuid())
  kode_debitur  Int   
  branchCode       String
  branchOffice     String
  uker             String
  namaDebitur      String
  nomorRekening    String
  outStanding      Float
  noTelp           String
  rmPengelola      String
  pn               String
  segmen           String
  descLoan         String
  intraEkstra      String
  kolektibilitas   String
  tanggalChargeOff DateTime
  klasifikasiEc    KlasifikasiEC
  agingPh1         Int?
  agingPh2         Int?
  act     Act[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

enum KlasifikasiEC {
  GOLD
  SILVER
  BRONZE
  HABIS_AGUNAN
}


model Act {
  id_act               String   @id @default(uuid())
  debitur              Debitur? @relation(fields: [debiturId], references: [id_debitur])
  debiturId            String
  user          User?       @relation(fields: [userId], references: [id_rm])
  userId        String?
  tindakan             String
  kelengkapanBerkas    String
  lelangKe             String
  nlLama               String
  nlBaru               String
  actifitas_lelang      String
  nomorTicket          String
  actifitas_non_lelang   String
  extraordinary        String
  hasil_lelang          String
  jumlahHasilLelang    String
  recoveryNonLelang    String
  inputWebInfoLelangBri String
  alamatAgunan         String
  fotoAgunan1          String?
  fotoAgunan2          String?
  fotoAgunan3          String?
  fotoAgunan4          String?
  fotoAgunan5          String?
  fotoAgunan6          String?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
}

